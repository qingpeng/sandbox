#!/usr/bin/perl

if (@ARGV<2) {
	print  "programm file_in file_out \n";
	exit;
}
($file_in,$file_list,$file_out) =@ARGV;

open IN,"$file_in" || die"$!";
open LIST,"$file_list" || die "$!";
open OUT,">$file_out" || die"$!";
#LIST
#ENSGALG00000000075	ENSGALP00000000102	464
#ENSGALG00000000076	ENSGALP00000000103	255
#ENSGALG00000000366	ENSGALP00000000497	750


#IN
#ENSG00000100030	ENST00000215832	ENSP00000215832	ENSGALG00000001501.1	99	ENSGALP00000002278
#ENSG00000108298	ENST00000225430	ENSP00000225430	ENSGALG00000001658.1	100	ENSGALP00000002527
#ENSG00000112062	ENST00000229795	ENSP00000229795			
#ENSG00000115216	ENST00000233557	ENSP00000233557	ENSGALG00000016512.1	90	ENSGALP00000026592
#ENSG00000118515	ENST00000237305	ENSP00000237305	ENSGALG00000013971.1	94	ENSGALP00000022604
#ENSG00000128918	ENST00000249750	ENSP00000249750	ENSGALG00000004270.1	95	ENSGALP00000006780
#ENSG00000131238	ENST00000253546	ENSP00000253546	ENSGALG00000003936.1	70	ENSGALP00000006259
#

while (<LIST>) {
	chomp;
	@ss= split /\t/,$_;
	$chick{$s[1]}=$s[2];
}

while (<IN>) {
	chomp;
	@s=split /\t/,$_;
	if ($s[3] ne "" && ! exists $hash{$s[0]}) {
		$hash{$s[0]}=$_;

	}
	elsif ($s[3] ne "" ) {
		@sss=split /\t/,$hash{$s[0]};
		if ($chick{$s[5]} > $chick{$sss[5]}) {
			$hash{$s[0]}=$_;
		}
	}
	


}
foreach $name (keys %hash) {
	print OUT "$hash{$name}\n"
}

